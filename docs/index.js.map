{"version":3,"file":"index.js","sources":["../src/af-step-toggle.ts","../src/af-preview.ts"],"sourcesContent":["export default class ActionFormStepToggle extends HTMLElement {\n\tprivate shadow: ShadowRoot;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.shadow = this.attachShadow({ mode: \"open\" });\n\t\tthis.shadow.innerHTML = \"<button part='button'><slot>Toggle Steps</slot></button>\";\n\t\tthis.addEventListener(\"click\", () => {\n\t\t\tthis.closest(\"action-form\")?.classList.toggle(\"no-steps\");\n\t\t});\n\t}\n}\n\ncustomElements.define(\"af-step-toggle\", ActionFormStepToggle);\n","function convertToTitleCase(str: string): string {\n\treturn str\n\t\t.replace(/[-_](.)/g, function (match) {\n\t\t\treturn \" \" + match.charAt(1).toUpperCase();\n\t\t})\n\t\t.replace(/([a-z])([A-Z])/g, \"$1 $2\")\n\t\t.replace(/^./, function (match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n}\nexport default class ActionFormPreview extends HTMLElement {\n\tprivate form!: HTMLFormElement | null;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst actionForm = this.closest(\"action-form\");\n\t\tthis.form = this.closest(\"form\");\n\n\t\tif (!actionForm || !this.form) return;\n\n\t\tactionForm.addEventListener(\"af-step\", () => {\n\t\t\tthis.render();\n\t\t});\n\t}\n\tconnectedCallback() {\n\t\tthis.render();\n\t}\n\n\tgetFormData() {\n\t\tif (!this.form) return;\n\t\tconst formData = new FormData(this.form);\n\t\tconsole.log(\"formData\", formData);\n\n\t\tconst keys = [...new Set(Array.from(formData.keys()))];\n\t\treturn keys\n\t\t\t.filter((key) => formData.has(key) && formData.getAll(key).some((value) => value !== \"\"))\n\t\t\t.map((key) => {\n\t\t\t\tconst values = formData.getAll(key);\n\t\t\t\tconst stringValues = values.filter((value) => typeof value === \"string\") as string[];\n\t\t\t\treturn {\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: stringValues,\n\t\t\t\t};\n\t\t\t});\n\t\t// const values = Array.from(formData.values());\n\t\t// return values;\n\t}\n\n\trender() {\n\t\tconst data = this.getFormData();\n\n\t\tthis.innerHTML = `${data\n\t\t\t?.map(\n\t\t\t\t(item) =>\n\t\t\t\t\t`<p><strong>${this.hasAttribute(\"title-case\") ? convertToTitleCase(item.key) : item.key}</strong>: ${item.value\n\t\t\t\t\t\t.map((value) => `<span>${value}</span>`)\n\t\t\t\t\t\t.join(\", \")}</p>`\n\t\t\t)\n\t\t\t.join(\"\")}`;\n\t}\n}\n\ncustomElements.define(\"af-preview\", ActionFormPreview);\n"],"names":["ActionFormStepToggle","__publicField","_a","convertToTitleCase","str","match","ActionFormPreview","actionForm","formData","key","value","stringValues","data","item"],"mappings":"4TAAA,MAAqBA,UAA6B,WAAY,CAG7D,aAAc,CACP,QAHCC,EAAA,eAIP,KAAK,OAAS,KAAK,aAAa,CAAE,KAAM,OAAQ,EAChD,KAAK,OAAO,UAAY,2DACnB,KAAA,iBAAiB,QAAS,IAAM,QACpCC,EAAA,KAAK,QAAQ,aAAa,IAA1B,MAAAA,EAA6B,UAAU,OAAO,WAAU,CACxD,CACF,CACD,CAEA,eAAe,OAAO,iBAAkBF,CAAoB,ECb5D,SAASG,EAAmBC,EAAqB,CAChD,OAAOA,EACL,QAAQ,WAAY,SAAUC,EAAO,CACrC,MAAO,IAAMA,EAAM,OAAO,CAAC,EAAE,YAAY,CAAA,CACzC,EACA,QAAQ,kBAAmB,OAAO,EAClC,QAAQ,KAAM,SAAUA,EAAO,CAC/B,OAAOA,EAAM,aAAY,CACzB,CACH,CACA,MAAqBC,UAA0B,WAAY,CAG1D,aAAc,CACP,QAHCL,EAAA,aAKD,MAAAM,EAAa,KAAK,QAAQ,aAAa,EACxC,KAAA,KAAO,KAAK,QAAQ,MAAM,EAE3B,GAACA,GAAc,CAAC,KAAK,OAEdA,EAAA,iBAAiB,UAAW,IAAM,CAC5C,KAAK,OAAO,CAAA,CACZ,CACF,CACA,mBAAoB,CACnB,KAAK,OAAO,CACb,CAEA,aAAc,CACb,GAAI,CAAC,KAAK,KAAM,OAChB,MAAMC,EAAW,IAAI,SAAS,KAAK,IAAI,EAC/B,eAAA,IAAI,WAAYA,CAAQ,EAEnB,CAAC,GAAG,IAAI,IAAI,MAAM,KAAKA,EAAS,MAAM,CAAC,CAAC,EAEnD,OAAQC,GAAQD,EAAS,IAAIC,CAAG,GAAKD,EAAS,OAAOC,CAAG,EAAE,KAAMC,GAAUA,IAAU,EAAE,CAAC,EACvF,IAAKD,GAAQ,CAEb,MAAME,EADSH,EAAS,OAAOC,CAAG,EACN,OAAQC,GAAU,OAAOA,GAAU,QAAQ,EAChE,MAAA,CACN,IAAAD,EACA,MAAOE,CAAA,CACR,CACA,CAGH,CAEA,QAAS,CACF,MAAAC,EAAO,KAAK,cAEb,KAAA,UAAY,GAAGA,GAAA,YAAAA,EACjB,IACAC,GACA,cAAc,KAAK,aAAa,YAAY,EAAIV,EAAmBU,EAAK,GAAG,EAAIA,EAAK,GAAG,cAAcA,EAAK,MACxG,IAAKH,GAAU,SAASA,CAAK,SAAS,EACtC,KAAK,IAAI,CAAC,QAEb,KAAK,GAAG,EACX,CACD,CAEA,eAAe,OAAO,aAAcJ,CAAiB"}