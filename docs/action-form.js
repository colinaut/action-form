var h=Object.defineProperty;var l=(a,c,e)=>c in a?h(a,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[c]=e;var n=(a,c,e)=>(l(a,typeof c!="symbol"?c+"":c,e),e);class d extends HTMLElement{constructor(){super();n(this,"form",this.querySelector("form"));n(this,"stepIndex",0);n(this,"steps",this.querySelectorAll("af-step"));n(this,"fieldsets",this.querySelectorAll("fieldset"));n(this,"formElements",this.querySelectorAll("input, select, textarea"));document.documentElement.classList.add("js"),this.form&&(this.hasAttribute("novalidate")&&this.form.setAttribute("novalidate",""),this.setAttribute("loaded",""),this.enhanceFieldsets(),this.steps.forEach((e,t)=>{e.setAttribute("index",String(t)),t===0&&e.setAttribute("active","")}),this.addEventListener("af-step",e=>{const t=e;this.stepIndex=t.detail.step,this.steps.forEach((s,r)=>{s.active&&(s.completed=s.valid),s.active=r===this.stepIndex})}))}enhanceFieldsets(){this.fieldsets.forEach(e=>{const t=e.dataset.watch,s=e.dataset.value,r=e.dataset.regex;if(t){const o=Array.from(this.formElements).filter(i=>i.name.toLowerCase()===t.toLowerCase());if(o.length===0)return;o.forEach(i=>{i.addEventListener("change",()=>{!s&&!r?this.show(e,i.checkValidity()):i instanceof HTMLInputElement&&["checkbox","radio"].includes(i.type)?this.checkMatches(i.value,s,r)&&this.show(e,i.checked):this.show(e,this.checkMatches(i.value,s,r))})})}})}checkMatches(e,t="",s){return s?new RegExp(s).test(e):t===e}show(e,t){t?(e.removeAttribute("hidden"),e.removeAttribute("disabled")):(e.setAttribute("hidden",""),e.setAttribute("disabled",""))}connectedCallback(){}}customElements.define("action-form",d);
//# sourceMappingURL=action-form.js.map
