var m=Object.defineProperty;var f=(i,n,t)=>n in i?m(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t;var o=(i,n,t)=>(f(i,typeof n!="symbol"?n+"":n,t),t);function p(i){return i instanceof HTMLInputElement&&["radio","checkbox","range","color","file"].includes(i.type)||i instanceof HTMLSelectElement}function E(i){return i instanceof HTMLInputElement&&["text","email","tel","password","date","month","number","datetime-local","time","url","week"].includes(i.type)||i instanceof HTMLTextAreaElement}class b extends HTMLElement{constructor(){super();o(this,"hiddenValid",document.createElement("input"))}hide(t){t?this.removeAttribute("show"):this.setAttribute("show","")}connectedCallback(){const t=this.getAttribute("watch")||"",a=this.closest("form"),e=a==null?void 0:a.querySelector(`:where(input, select, textarea, fieldset)[name=${t}]`);if(e&&(E(e)&&e.addEventListener("blur",()=>{this.hide(e.checkValidity())}),p(e)&&e.addEventListener("change",()=>{this.hide(e.checkValidity())}),e instanceof HTMLFieldSetElement)){const d=e.querySelectorAll("input, select, textarea");this.addValidityField(e,t);const l=Number(e.getAttribute("min")||1),r=Number(e.getAttribute("max")||d.length);(l||r)&&e.addEventListener("change",u=>{const s=u.target;if(s instanceof HTMLSelectElement||s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement){if(s.matches(`input[name="action-fieldset-${t}"]`))this.hide(s.checkValidity());else if(Array.from(d).includes(s)){const h=Array.from(d).filter(c=>c instanceof HTMLInputElement&&["checkbox","radio"].includes(c.type)?c.checked:c.value);h.length>=l&&h.length<=r?(this.hiddenValid.checked=!0,this.dispatchHiddenValid(!0)):this.dispatchHiddenValid(!1)}}})}}dispatchHiddenValid(t){this.hiddenValid.checked=t,this.hiddenValid.dispatchEvent(new Event("change",{bubbles:!0}))}addValidityField(t,a){const e=this.hiddenValid;e.type="checkbox",e.name=`action-fieldset-${a}`,e.setAttribute("required",""),e.style.display="none",e.value="valid",t.append(e)}}customElements.define("error-msg",b);
//# sourceMappingURL=error-msg.js.map
