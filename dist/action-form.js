var h=Object.defineProperty;var l=(a,c,e)=>c in a?h(a,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[c]=e;var i=(a,c,e)=>(l(a,typeof c!="symbol"?c+"":c,e),e);class u extends HTMLElement{constructor(){super();i(this,"form",this.querySelector("form"));i(this,"stepIndex",0);i(this,"steps",this.querySelectorAll("af-step"));i(this,"fieldsets",this.querySelectorAll("fieldset"));i(this,"formElements",this.querySelectorAll("input, select, textarea"));document.documentElement.classList.add("js"),this.form&&(this.hasAttribute("novalidate")&&this.form.setAttribute("novalidate",""),this.setAttribute("loaded",""),this.enhanceFieldsets(),this.steps.forEach((e,t)=>{e.setAttribute("index",String(t)),t===0&&e.setAttribute("active","")}),this.addEventListener("af-step",e=>{const t=e;console.log("af-step",t.detail.step),this.stepIndex=t.detail.step,this.steps.forEach((o,n)=>{o.active&&(o.completed=o.valid),o.active=n===this.stepIndex})}))}enhanceFieldsets(){this.fieldsets.forEach(e=>{const t=e.dataset.watch,o=e.dataset.value,n=e.dataset.regex;if(t){const r=Array.from(this.formElements).filter(s=>s.name.toLowerCase()===t.toLowerCase());if(r.length===0)return;console.log(e.name,"watching",t,r),r.forEach(s=>{s.addEventListener("change",()=>{!o&&!n?(console.log("change no value",s.value),this.show(e,s.checkValidity())):s instanceof HTMLInputElement&&["checkbox","radio"].includes(s.type)?(console.log("change checkbox",s.value),this.checkMatches(s.value,o,n)&&this.show(e,s.checked)):(console.log("change else",s.value),this.show(e,this.checkMatches(s.value,o,n)))})})}})}checkMatches(e,t="",o){return o?new RegExp(o).test(e):t===e}show(e,t){t?(e.removeAttribute("hidden"),e.removeAttribute("disabled")):(e.setAttribute("hidden",""),e.setAttribute("disabled",""))}connectedCallback(){console.log("connected")}}customElements.define("action-form",u);
//# sourceMappingURL=action-form.js.map
