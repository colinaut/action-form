var c=Object.defineProperty;var p=(a,o,s)=>o in a?c(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s;var n=(a,o,s)=>(p(a,typeof o!="symbol"?o+"":o,s),s);import{m as d}from"./assets/helpers-BDWkIbAD.js";var l,h;class u extends HTMLElement{constructor(){super();n(this,"shadow");n(this,"valid");n(this,"completed");n(this,"active");n(this,"index");n(this,"this");n(this,"actionForm",this.closest("action-form"));n(this,"numberOfSteps",((h=(l=this.actionForm)==null?void 0:l.steps)==null?void 0:h.length)||0);d(this,[{attr:"completed",type:"boolean"},{attr:"active",type:"boolean"},{attr:"valid",type:"boolean"},{attr:"index",type:"number"}]);const s=this.attachInternals();this.shadow=s.shadowRoot,this.this=this.shadow||this,this.this.addEventListener("input",()=>{this.valid=this.isValid,this.completed=this.completed&&this.valid}),this.this.addEventListener("count",e=>{const i=e;this.valid=i.detail.validity}),this.this.addEventListener("click",e=>{const i=e.target;i instanceof HTMLButtonElement&&(console.log("ðŸš€ ~ FormStep ~ this.addEventListener ~ target:",i),i.matches(".af-step-next")?this.step("next"):i.matches(".af-step-prev")&&this.step("prev"))})}get isValid(){return this.querySelectorAll(":invalid").length===0}get nextStep(){return this.index+1<this.numberOfSteps?this.index+1:null}get prevStep(){return this.index-1>=0?this.index-1:null}get isLastStep(){return this.index===this.numberOfSteps-1}step(s="next"){const e=s==="next"?this.nextStep:this.prevStep;if(e!==null){if(console.log("ðŸš€ ~ FormStep ~ step ~ directionIndex:",e),s==="next"&&this.querySelectorAll(":invalid").length>0){const i=this.querySelectorAll(":invalid");Array.from(i).some(t=>t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?(console.log("af-step: invalid element",t),t.focus(),t.dispatchEvent(new CustomEvent("toggle-error")),!0):!1),Array.from(i).some(t=>{if(t instanceof HTMLFieldSetElement){console.log("af-step: invalid element",t),t.dispatchEvent(new CustomEvent("toggle-error"));const r=t.querySelector("input, select, textarea");r&&r.focus()}});return}s==="next"&&(this.completed=!0),this.active=!1,this.dispatchEvent(new CustomEvent("af-step",{bubbles:!0,detail:{step:e}}))}}connectedCallback(){if(this.valid=this.isValid,this.completed=!1,!(this.this.querySelector("slot[name=footer]")||this.this.querySelector("[slot=footer]"))){const e=document.createElement("nav");e.classList.add("af-step-nav"),e.setAttribute("part","step-nav"),e.setAttribute("aria-label","Step Navigation");const i=r=>`<button type="button" class="af-step-${r.toLowerCase()}" part="step-btn">${r}</button>`,t="<span></span>";e.innerHTML=`${this.prevStep!==null?i("Prev"):t}
            ${this.nextStep!==null?i("Next"):t}`,this.this.appendChild(e)}}}customElements.define("af-step",u);
//# sourceMappingURL=af-step.js.map
