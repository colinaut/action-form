var l=Object.defineProperty;var h=(a,n,e)=>n in a?l(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var r=(a,n,e)=>(h(a,typeof n!="symbol"?n+"":n,e),e);import{m as p}from"./assets/helpers-BDWkIbAD.js";class c extends HTMLElement{constructor(){var o;super();r(this,"shadow");r(this,"this");r(this,"actionForm");r(this,"numberOfSteps");r(this,"valid");r(this,"completed");r(this,"active");const e=this.attachInternals();this.shadow=e.shadowRoot,this.this=this.shadow||this;const s=this.closest("action-form");s&&(this.actionForm=s,this.numberOfSteps=((o=s.steps)==null?void 0:o.length)||0,p(this,[{attr:"completed",type:"boolean"},{attr:"active",type:"boolean"},{attr:"valid",type:"boolean"}]),this.this.addEventListener("input",()=>{this.valid=this.isValid,this.completed=this.completed&&this.valid}),this.this.addEventListener("count",t=>{const i=t;this.valid=i.detail.validity}),this.this.addEventListener("click",t=>{const i=t.target;i instanceof HTMLButtonElement&&(i.matches(".af-step-next")?this.step("next"):i.matches(".af-step-prev")&&this.step("prev"))}))}get isValid(){return this.querySelectorAll(":invalid").length===0}get thisStep(){var e;return((e=this.actionForm)==null?void 0:e.steps)&&Array.from(this.actionForm.steps).indexOf(this)||0}get nextStep(){return this.thisStep+1<this.numberOfSteps?this.thisStep+1:null}get prevStep(){return this.thisStep-1>=0?this.thisStep-1:null}get isLastStep(){return this.thisStep===this.numberOfSteps-1}step(e="next"){const s=e==="next"?this.nextStep:this.prevStep;if(s!==null){if(console.log("ðŸš€ ~ FormStep ~ step ~ directionIndex:",s),e==="next"&&this.querySelectorAll(":invalid").length>0){const o=this.querySelectorAll(":invalid");Array.from(o).some(t=>t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?(console.log("af-step: invalid element",t),t.focus(),t.dispatchEvent(new CustomEvent("toggle-error")),!0):!1),Array.from(o).some(t=>{if(t instanceof HTMLFieldSetElement){console.log("af-step: invalid element",t),t.dispatchEvent(new CustomEvent("toggle-error"));const i=t.querySelector("input, select, textarea");i&&i.focus()}});return}e==="next"&&(this.completed=!0),this.active=!1,this.dispatchEvent(new CustomEvent("af-step",{bubbles:!0,detail:{step:s}}))}}connectedCallback(){if(this.valid=this.isValid,this.completed=!1,!(this.this.querySelector("slot[name=footer]")||this.this.querySelector("[slot=footer]"))){const s=document.createElement("nav");s.classList.add("af-step-nav"),s.setAttribute("part","step-nav"),s.setAttribute("aria-label","Step Navigation");const o=i=>`<button type="button" class="af-step-${i.toLowerCase()}" part="step-btn">${i}</button>`,t="<span></span>";s.innerHTML=`${this.prevStep!==null?o("Prev"):t}
            ${this.nextStep!==null?o("Next"):t}`,this.this.appendChild(s)}}}customElements.define("af-step",c);
//# sourceMappingURL=af-step.js.map
