{"version":3,"file":"signals-DHVSGanU.js","sources":["../../src/signals.ts"],"sourcesContent":["type Context = { execute: () => void };\n\nconst context: Context[] = [];\n\nexport function createSignal<T>(value: T): [() => T, (value: T) => void] {\n\tconst subscriptions = new Set<Context>();\n\n\tconst read = () => {\n\t\tconst observer = context[context.length - 1];\n\t\tif (observer) subscriptions.add(observer);\n\t\treturn value;\n\t};\n\tconst write = (newValue: T) => {\n\t\tvalue = newValue;\n\t\tfor (const observer of subscriptions) {\n\t\t\tobserver.execute();\n\t\t}\n\t};\n\n\treturn [read, write];\n}\n\nexport function createEffect(fn: () => void) {\n\tconst effect = {\n\t\texecute() {\n\t\t\tcontext.push(effect);\n\t\t\tfn();\n\t\t\tcontext.pop();\n\t\t},\n\t};\n\n\teffect.execute();\n}\n"],"names":["context","createSignal","value","subscriptions","observer","newValue","createEffect","fn","effect"],"mappings":"AAEA,MAAMA,EAAqB,CAAA,EAEpB,SAASC,EAAgBC,EAAyC,CAClE,MAAAC,MAAoB,IAcnB,MAAA,CAZM,IAAM,CAClB,MAAMC,EAAWJ,EAAQA,EAAQ,OAAS,CAAC,EACvC,OAAAI,GAAUD,EAAc,IAAIC,CAAQ,EACjCF,CAAA,EAEOG,GAAgB,CACtBH,EAAAG,EACR,UAAWD,KAAYD,EACtBC,EAAS,QAAQ,CAClB,CAGkB,CACpB,CAEO,SAASE,EAAaC,EAAgB,CAC5C,MAAMC,EAAS,CACd,SAAU,CACTR,EAAQ,KAAKQ,CAAM,EAChBD,IACHP,EAAQ,IAAI,CACb,CAAA,EAGDQ,EAAO,QAAQ,CAChB"}