{"version":3,"file":"af-preview.js","sources":["../src/af-preview.ts"],"sourcesContent":["import ActionForm from \"./action-form\";\nimport { createEffect } from \"./signals\";\nfunction convertToTitleCase(str: string): string {\n\treturn str\n\t\t.replace(/[-_](.)/g, function (match) {\n\t\t\treturn \" \" + match.charAt(1).toUpperCase();\n\t\t})\n\t\t.replace(/([a-z])([A-Z])/g, \"$1 $2\")\n\t\t.replace(/^./, function (match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n}\n\nexport default class ActionFormPreview extends HTMLElement {\n\tprivate actionForm!: ActionForm;\n\n\tconnectedCallback() {\n\t\tconst actionForm = this.closest(\"action-form\");\n\t\tif (actionForm && actionForm instanceof ActionForm) {\n\t\t\tthis.actionForm = actionForm;\n\t\t\tconst form = actionForm.querySelector(\"form\");\n\t\t\tif (!form) return;\n\t\t\tcreateEffect(() => {\n\t\t\t\tthis.render(this.actionForm.data.getForm());\n\t\t\t});\n\t\t}\n\t}\n\n\tget ignore(): string[] {\n\t\treturn this.getAttribute(\"ignore\")?.split(\",\") || [];\n\t}\n\n\trender(data: Record<string, FormDataEntryValue[]> | FormDataEntryValue[] | null) {\n\t\t// console.log(\"af-preview render\", data);\n\n\t\tconst valuesToText = (values: FormDataEntryValue[]) => {\n\t\t\treturn values\n\t\t\t\t.map((value) => {\n\t\t\t\t\tif (typeof value === \"string\") return value;\n\t\t\t\t\treturn \"FILE\";\n\t\t\t\t})\n\t\t\t\t.toString();\n\t\t};\n\n\t\tif (data && !Array.isArray(data)) {\n\t\t\tthis.innerHTML = `<ul>${Object.entries(data)\n\t\t\t\t.filter(([key]) => !this.ignore.includes(key))\n\t\t\t\t.map(([key, values]) => `<li><strong>${this.hasAttribute(\"title-case\") ? convertToTitleCase(key) : key}</strong>: ${valuesToText(values)}</li>`)\n\t\t\t\t.join(\"\")}</ul>`;\n\t\t}\n\t}\n}\n\ncustomElements.define(\"af-preview\", ActionFormPreview);\n"],"names":["convertToTitleCase","str","match","ActionFormPreview","__publicField","actionForm","ActionForm","createEffect","_a","data","valuesToText","values","value","key"],"mappings":"0RAEA,SAASA,EAAmBC,EAAqB,CAChD,OAAOA,EACL,QAAQ,WAAY,SAAUC,EAAO,CACrC,MAAO,IAAMA,EAAM,OAAO,CAAC,EAAE,YAAY,CAAA,CACzC,EACA,QAAQ,kBAAmB,OAAO,EAClC,QAAQ,KAAM,SAAUA,EAAO,CAC/B,OAAOA,EAAM,aAAY,CACzB,CACH,CAEA,MAAqBC,UAA0B,WAAY,CAA3D,kCACSC,EAAA,mBAER,mBAAoB,CACb,MAAAC,EAAa,KAAK,QAAQ,aAAa,EACzC,GAAAA,GAAcA,aAAsBC,EAAY,CAGnD,GAFA,KAAK,WAAaD,EAEd,CADSA,EAAW,cAAc,MAAM,EACjC,OACXE,EAAa,IAAM,CAClB,KAAK,OAAO,KAAK,WAAW,KAAK,SAAS,CAAA,CAC1C,CACF,CACD,CAEA,IAAI,QAAmB,OACtB,QAAOC,EAAA,KAAK,aAAa,QAAQ,IAA1B,YAAAA,EAA6B,MAAM,OAAQ,EACnD,CAEA,OAAOC,EAA0E,CAG1E,MAAAC,EAAgBC,GACdA,EACL,IAAKC,GACD,OAAOA,GAAU,SAAiBA,EAC/B,MACP,EACA,SAAS,EAGRH,GAAQ,CAAC,MAAM,QAAQA,CAAI,IAC9B,KAAK,UAAY,OAAO,OAAO,QAAQA,CAAI,EACzC,OAAO,CAAC,CAACI,CAAG,IAAM,CAAC,KAAK,OAAO,SAASA,CAAG,CAAC,EAC5C,IAAI,CAAC,CAACA,EAAKF,CAAM,IAAM,eAAe,KAAK,aAAa,YAAY,EAAIX,EAAmBa,CAAG,EAAIA,CAAG,cAAcH,EAAaC,CAAM,CAAC,OAAO,EAC9I,KAAK,EAAE,CAAC,QAEZ,CACD,CAEA,eAAe,OAAO,aAAcR,CAAiB"}